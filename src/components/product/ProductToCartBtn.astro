---
import CartAddItemIcon from "@/components/icon/CartAddItemIcon.astro";
import CartItemAddedIcon from "@/components/icon/CartItemAddedIcon.astro";

const { product } = Astro.props;
---

<button
  class="addToCartBtn"
  :class="{'inCart' : inCart}"
  data-code={product.data.code}
  data-name={product.data.name}
  data-price={product.data.price}
  data-image={product.data.images[0].src}
  x-data="product()"
  @click=`toCart()`
  :title="btnLabel"
>
  <template x-if="inCart">
    <div class="_label +in">
      <CartItemAddedIcon />
    </div>
  </template>
  <template x-if="!inCart">
    <div class="_label +not">
      <CartAddItemIcon />
    </div>
  </template>
</button>

<style lang="scss">
  .addToCartBtn {
    -webkit-appearance: none;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
    border: 0;
    border-radius: 5px;
    background: none;
    font-size: 2.5rem;
    color: #fff;
    cursor: pointer;

    ._label {
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(1px 1px 3px #444);

      &.\+in {
        color: hsl(120, 100%, 75%);
        animation: jello-horizontal 0.4s both;
      }
    }
  }
</style>
